<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>CSAPP笔记之存储器层次结构 | pjmike的博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="下面内容是对《深入理解计算机系统》和内存与缓存文章的一个学习笔记">
<meta name="keywords" content="CSAPP，笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="CSAPP笔记之存储器层次结构">
<meta property="og:url" content="https://pjmike.github.io/2019/04/27/CSAPP笔记之存储器层次结构/index.html">
<meta property="og:site_name" content="pjmike的博客">
<meta property="og:description" content="下面内容是对《深入理解计算机系统》和内存与缓存文章的一个学习笔记">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/%E6%9C%BA%E6%A2%B0%E7%A1%AC%E7%9B%98.jpg">
<meta property="og:image" content="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/%E7%A3%81%E7%9B%98%E7%BB%93%E6%9E%84.png">
<meta property="og:image" content="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/%E6%80%BB%E7%BA%BF%E7%BB%93%E6%9E%84.jpg">
<meta property="og:image" content="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/CPU%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE1.png">
<meta property="og:image" content="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/CPU%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE2.png">
<meta property="og:image" content="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/CPU%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE3.png">
<meta property="og:image" content="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/%E5%AD%98%E5%82%A8%E5%99%A8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84.PNG">
<meta property="og:image" content="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E5%AD%98%E5%82%A8%E5%99%A8.jpg">
<meta property="og:image" content="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E5%AD%98%E5%82%A8%E5%99%A8%E7%BB%93%E6%9E%84.jpg">
<meta property="og:image" content="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E5%AD%98%E5%82%A8%E5%99%A8%E7%BB%93%E6%9E%84.jpg">
<meta property="og:image" content="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E5%AD%98%E5%82%A8%E5%99%A8%E6%9F%A5%E6%89%BE%E8%BF%87%E7%A8%8B2.jpg">
<meta property="og:image" content="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/%E5%A4%9A%E6%A0%B8%E5%A4%84%E7%90%86%E5%99%A8%E7%9A%84%E7%BB%84%E7%BB%87%E7%BB%93%E6%9E%84.JPG">
<meta property="og:updated_time" content="2019-04-27T12:48:12.860Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CSAPP笔记之存储器层次结构">
<meta name="twitter:description" content="下面内容是对《深入理解计算机系统》和内存与缓存文章的一个学习笔记">
<meta name="twitter:image" content="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/%E6%9C%BA%E6%A2%B0%E7%A1%AC%E7%9B%98.jpg">
    

    
        <link rel="alternate" href="#" title="pjmike的博客" type="application/atom+xml" />
    

    
        <link rel="icon" href="/css/images/favicon.ico" />
    

    <link rel="stylesheet" href="/libs/font-awesome5/css/fontawesome.min.css">
    <link rel="stylesheet" href="/libs/font-awesome5/css/fa-brands.min.css">
    <link rel="stylesheet" href="/libs/font-awesome5/css/fa-solid.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


    <script src="https://cdn1.lncld.net/static/js/av-min-1.2.1.js"></script>
    <script>AV.initialize("4vB7T0TRY1mzQXMqBlJ2Hfe7-gzGzoHsz", "kOo7IkBdpIwhCSDShE4OgS1e");</script>
</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">pjmike的博客</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/pjmike.jpg" />
                            <i class="fas fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fas fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile" class="profile-fixed">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/pjmike.jpg" />
            <h2 id="name">pjmike</h2>
            <h3 id="title">努力做一个笔耕者</h3>
            <span id="location"><i class="fas fa-map-marker-alt" style="padding-right: 5px"></i>西安, 中国</span>
            <a id="follow" target="_blank" href="https://github.com/pjmike/">FOLLOW</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                66
                <span>posts</span>
            </div>
            <div class="article-info-block">
                35
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="http://github.com/pjmike/" target="_blank" title="github" class=tooltip>
                            <i class="fab fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="#" target="_blank" title="twitter" class=tooltip>
                            <i class="fab fa-twitter"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="#" target="_blank" title="facebook" class=tooltip>
                            <i class="fab fa-facebook"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="mailto:pjmike_pj@163.com" target="_blank" title="email" class=tooltip>
                            <i class="fab fa-email"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="#" target="_blank" title="rss" class=tooltip>
                            <i class="fab fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-CSAPP笔记之存储器层次结构" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            CSAPP笔记之存储器层次结构
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2019/04/27/CSAPP笔记之存储器层次结构/">
            <time datetime="2019-04-27T12:42:16.000Z" itemprop="datePublished">2019-04-27</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/categories/笔记/">笔记</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/CSAPP，笔记/">CSAPP，笔记</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
                <div id="toc" class="toc-article">
                <strong class="toc-title">Catalogue</strong>
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#随机访问存储器"><span class="toc-number">1.</span> <span class="toc-text">随机访问存储器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#传统机械硬盘"><span class="toc-number">1.1.</span> <span class="toc-text">传统机械硬盘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-磁盘容量"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.磁盘容量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-磁盘操作"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. 磁盘操作</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总线"><span class="toc-number">2.</span> <span class="toc-text">总线</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#局部性原理"><span class="toc-number">3.</span> <span class="toc-text">局部性原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#存储器层次结构"><span class="toc-number">4.</span> <span class="toc-text">存储器层次结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#缓存命中"><span class="toc-number">4.1.</span> <span class="toc-text">缓存命中</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#缓存不命中"><span class="toc-number">4.2.</span> <span class="toc-text">缓存不命中</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#缓存不命中的种类"><span class="toc-number">4.2.1.</span> <span class="toc-text">缓存不命中的种类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#缓存利用局部性原理"><span class="toc-number">4.3.</span> <span class="toc-text">缓存利用局部性原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#高速缓存"><span class="toc-number">4.4.</span> <span class="toc-text">高速缓存</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-读取过程"><span class="toc-number">4.4.1.</span> <span class="toc-text">1. 读取过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-缓存一致性问题（拓展）"><span class="toc-number">4.4.2.</span> <span class="toc-text">2. 缓存一致性问题（拓展）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考资料"><span class="toc-number">5.</span> <span class="toc-text">参考资料</span></a></li></ol>
                </div>
            
            <blockquote>
<p>下面内容是对《深入理解计算机系统》和<a href="https://wdxtub.com/2016/04/16/thin-csapp-3/" target="_blank" rel="noopener">内存与缓存</a>文章的一个学习笔记</p>
</blockquote>
<a id="more"></a>
<h2 id="随机访问存储器"><a href="#随机访问存储器" class="headerlink" title="随机访问存储器"></a>随机访问存储器</h2><p>随机访问存储器(Random-Access Memory，RAM)分为两类：</p>
<ul>
<li>静态的：静态RAM(SRAM)<ul>
<li>静态RAM比动态RAM更快，同时也更贵，不需要定期刷新，SRAM用来作为高速缓存存储器</li>
</ul>
</li>
<li>动态的: 动态RAM(DRAM)<ul>
<li>DRAM稍微慢一点(大概是SRAM速度的十分之一)，需要刷新，可以用来作为主存以及图形系统的帧缓冲区</li>
</ul>
</li>
</ul>
<p>无论是DRAM还是SRAM，一旦不通电，所有的信息都会丢失，如果想要让数据持久化，可以考虑ROM、PROM、EPROM、EEPROM等介质。固体硬件会存储在ROM中 (比如 BIOS，磁盘控制器，网卡、图形加速器、安全子系统等等)。</p>
<p>目前比较常见的就是SSD固态硬盘，它是一种基于闪存的磁盘驱动器，而闪存是一类非易失性存储器，基于EEPROM。SSD取消了机械结构，更稳定快速</p>
<h3 id="传统机械硬盘"><a href="#传统机械硬盘" class="headerlink" title="传统机械硬盘"></a>传统机械硬盘</h3><p>传统机械硬盘部件如下：</p>
<p><img src="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/%E6%9C%BA%E6%A2%B0%E7%A1%AC%E7%9B%98.jpg" alt="机械硬盘"></p>
<p>机械硬盘有许多片磁盘组成，每一片磁盘有两面，每一面由一圈圈的磁道组成，每个磁道被划分为一组扇区，每个扇区包含相等数量的数据位（通常是512字节）</p>
<p><img src="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/%E7%A3%81%E7%9B%98%E7%BB%93%E6%9E%84.png" alt="磁盘结构"></p>
<h4 id="1-磁盘容量"><a href="#1-磁盘容量" class="headerlink" title="1.磁盘容量"></a>1.磁盘容量</h4><p>硬盘的容量指的是最大能存储的比特数，通常用 GB 来做单位。1 GB 相当于 10 的 9 次方个 Byte。磁盘容量是由以下技术因素决定的：</p>
<ul>
<li>记录密度 (位/英寸)：磁道一英寸的段中保存的位数</li>
<li>磁道密度 (道/英寸)：1英寸直径能保存多少条磁道</li>
<li>面密度 (位/平方英寸)：记录密度与磁道密度的乘积</li>
</ul>
<p>容量 Capacity = 每个扇区的字节数(bytes/sector) x 磁道上的平均扇区数(avg sectors/track) x 磁盘一面的磁道数(tracks/surface) x 磁盘的面数(surfaces/platter) x 硬盘包含的磁盘数(platters/disk)</p>
<h4 id="2-磁盘操作"><a href="#2-磁盘操作" class="headerlink" title="2. 磁盘操作"></a>2. 磁盘操作</h4><p>磁盘以扇区大小的块来读写数据，对扇区的访问时间(access time)有三个主要的部分：寻道时间(seek time)、旋转时间(rotational latency)和传送时间（transfer time):</p>
<ul>
<li><p>寻道时间： 为了读取某个目标扇区的内容，传动臂首先将读/写头定位到包含目标扇区的磁道上。移动传动臂所需的时间称为寻道时间。（现代驱动器寻道时间通常在3~9ms)</p>
</li>
<li><p>旋转时间：一旦读/写头定位到了期望的磁道，驱动器等待目标扇区的第一个位旋转到读/写头下。该步骤取决于硬盘具体的转速，一般来说是7200 RPM</p>
</li>
<li><p>传送时间：当目标扇区1的第一位位于读/写头下时，驱动器等待目标扇区的第一个位旋转到读/写头下。该步骤取决于需要读取的扇区数目</p>
</li>
</ul>
<p>举个例子，假设转速是 7200 RPM，平均寻址时间 9ms，平均每个磁道的 sector 数目是 400，那么我们有：</p>
<ul>
<li>Tavg rotation = 1/2 x (60 secs / 7200 RPM) x 1000 ms/sec = 4 ms</li>
<li>Tavg transfer = 60 / 7200 RPM x 1/400 secs/track x 1000 ms/sec = 0.02 ms</li>
<li>Taccess = 9 ms + 4 ms + 0.02 ms</li>
</ul>
<p>从这里可以看出，主要决定访问时间的是<strong>寻址时间和旋转延迟</strong></p>
<h2 id="总线"><a href="#总线" class="headerlink" title="总线"></a>总线</h2><p>总线是用来传输地址、数据和控制信号的一组平行的电线，通常来说由多个设备共享。</p>
<p>CPU通过总线和对应的接口从不同的设备中获取所需要的数据，然后放入寄存器中等待运算</p>
<p><img src="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/%E6%80%BB%E7%BA%BF%E7%BB%93%E6%9E%84.jpg" alt="总线结构"></p>
<p>上图展示了一个计算机系统的大致配置，主要部件是CPU芯片，I/O桥，组成主存的DRAM存储器模块以及I/O设备。这些部件由总线连接起来，系统总线连接CPU和I/O桥1，内存总线连接I/O桥和主存，I/O总线连接I/O设备与I/O桥</p>
<p>下面来看一下CPU从磁盘中读数据时发生的过程是怎样的。</p>
<p>CPU使用一种称为存储器映射I/O的技术来向I/O设备发出命令，在使用存储器映射I/O的系统中，地址空间有一块地址是为与I/O设备通信保留的，每个这样的地址称为一个I/O端口，当一个设备连接到总线时，它与一个或多个端口相关联。</p>
<ol>
<li>CPU通过将命令、逻辑块号和目的存储器地址写到与磁盘相关联的存储器映射地址，发起一个磁盘读，如下图</li>
</ol>
<p><img src="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/CPU%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE1.png" alt="CPU1"></p>
<ol>
<li>磁盘控制器读扇区，并执行到主存的DMA传送</li>
</ol>
<p><img src="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/CPU%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE2.png" alt="CPU2"></p>
<ol>
<li>当DMA传送完成后，磁盘控制器用中断的方式通知CPU</li>
</ol>
<p><img src="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/CPU%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE3.png" alt="CPU3"></p>
<ol>
<li>CPU然后从主存读取数据</li>
</ol>
<p>在磁盘控制器收到来自CPU的读命令之后，它将逻辑块号翻译成一个扇区地址，读该扇区的内容，然后将这些内容直接传送到主存，不需要CPU的干涉，设备可以自己执行读或写总线事务，而不需要CPU干涉的过程，这个过程称为直接存储器访问（DMA)，这种传送称为DMA传送。</p>
<p>在DMA传送完成后，磁盘扇区的内容被安全地存储在主存中以后，磁盘控制器通过给CPU发送一个中断信号来通知CPU，基本思想就是中断会发信号到CPU芯片的一个外部引脚上，这会导致CPU暂停它当前正在做的工作，跳转到一个操作系统例程，这个程序会记录下I/O已经完成，然后将控制返回到CPU被中断的地方。</p>
<h2 id="局部性原理"><a href="#局部性原理" class="headerlink" title="局部性原理"></a>局部性原理</h2><p>局部性通常有两种不同的形式：</p>
<ul>
<li>时间局部性<ul>
<li>在一个具有良好时间局部性的程序中，被引用过一次的存储器位置很可能在不远的将来再被多次引用。程序循环、堆栈等是产生时间局部性的原因</li>
</ul>
</li>
<li>空间局部性<ul>
<li>在一个具有良好空间局部性的程序中，如果一个存储器位置被引用了一次，那么程序很可能在不远的将来引用附近的一个存储器位置 </li>
</ul>
</li>
</ul>
<p>举个例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sum = 0;</span><br><span class="line">for (i = 0; i &lt; n; i++)&#123;</span><br><span class="line">    sum += a[i];</span><br><span class="line">&#125;</span><br><span class="line">return sum;</span><br></pre></td></tr></table></figure></p>
<p>这里每次循环都会访问sum是满足时间局部性的；数组的访问时连续的，属于空间局部性的。</p>
<h2 id="存储器层次结构"><a href="#存储器层次结构" class="headerlink" title="存储器层次结构"></a>存储器层次结构</h2><p>下图展示了存储器层次结构体系：</p>
<p><img src="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/%E5%AD%98%E5%82%A8%E5%99%A8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84.PNG" alt="存储器层次结构"></p>
<p>这里涉及到缓存的技术，缓存可以看做是把大且缓慢的设备中的数据的一部分拿出来存储到其中的更快的存储设备，在金字塔式存储体系中，每一层都可以看做是下一层的缓存，利用局部性原理，程序会更倾向于访问第k层的数据，而非第k+1层，这样就减少了访问时间</p>
<h3 id="缓存命中"><a href="#缓存命中" class="headerlink" title="缓存命中"></a>缓存命中</h3><p>当程序需要访问第k+1层的某个数据对象d时，它首先在当前存储在第k层的一个块中查找d，如果d刚好缓存在第k层中，那么就是我们所说的缓存命中（cache hit)</p>
<h3 id="缓存不命中"><a href="#缓存不命中" class="headerlink" title="缓存不命中"></a>缓存不命中</h3><p>如果第k层中没有缓存数据对象d，那么就是我们所说的缓存不命中(cache miss)，当发生缓存不命中时，第k层的缓存从第k+1层缓存中取出包含d的那个块，如果第k层的缓存已经满了的话，可能就会覆盖现存的一个块。</p>
<h4 id="缓存不命中的种类"><a href="#缓存不命中的种类" class="headerlink" title="缓存不命中的种类"></a>缓存不命中的种类</h4><p>缓存不命中有三种：</p>
<ul>
<li>强制性不命中<ul>
<li>CPU 第一次访问相应缓存块，缓存中肯定没有对应数据，这是不可避免的</li>
</ul>
</li>
<li>冲突b不命中(Confilict Miss):    <ul>
<li>在直接相联或组相联的缓存中，不同的缓存块由于索引相同相互替换，引起的失效叫做冲突失效</li>
</ul>
</li>
<li>容量不命中(Capacity Miss): <ul>
<li>有限的缓存容量导致缓存放不下而被替换，被替换出去的缓存块再被访问，引起的失效叫做容量失效</li>
</ul>
</li>
</ul>
<h3 id="缓存利用局部性原理"><a href="#缓存利用局部性原理" class="headerlink" title="缓存利用局部性原理"></a>缓存利用局部性原理</h3><p>概括来说，基于缓存的存储器层次结构行之有效，是因为较慢的存储设备比较快的存储设备更便宜，还因为程序往往展示<strong>局部性</strong>：</p>
<ul>
<li><p>利用时间局部性：由于时间局部性，同一数据对象可能会被多次使用，一旦一个数据对象在第一次不命中时被拷贝到缓存中，我们就会期望后面对该目标有一系列的访问命中，因为缓存比低一层的存储设备更快，对后面的命中的服务会比最开始的不命中快很多</p>
</li>
<li><p>利用空间局部性：块通常包含有多个数据对象，由于空间局部性，我们会期望后面对该块中的其他对象的访问能够补偿不命中后拷贝该块的花费</p>
</li>
</ul>
<h3 id="高速缓存"><a href="#高速缓存" class="headerlink" title="高速缓存"></a>高速缓存</h3><p>高速缓存存储器是由硬件自动管理的SRAM主存，CPU会首先从这里找数据，其所处的位置如下：</p>
<p><img src="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E5%AD%98%E5%82%A8%E5%99%A8.jpg" alt="高速缓存"></p>
<p>每个高速缓存器地址有m位，形成M=2^m个不同的地址，其关键组成部分为：</p>
<ul>
<li>一个高速缓存有S=2^s个高速缓存组（<strong>cache set</strong>)的数组</li>
<li>每个组包含E个高速缓存行(<strong>cache line</strong>)</li>
<li>每个行是由一个B=2^b字节的数据库（<strong>block</strong>)组成</li>
</ul>
<p><img src="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E5%AD%98%E5%82%A8%E5%99%A8%E7%BB%93%E6%9E%84.jpg" alt="高速缓存结构"></p>
<p>再次总结一下就是，高速缓存是一个高速缓存组的数组，每个组包含一个或多个行（cache line)，每个行包含了一个有效位，一些标记位，以及一个数据块。</p>
<p>当处理器需要访问一个地址时，会先在高速缓存中进行查找，如果高速缓存中有，那么将数据返回给CPU，如果没有，才接着向主存发起访问。那么高速缓存中查找过程怎样的呢？</p>
<p>首先在查找过程中我们从概念的层面将地址划分为三个部分，如下图：</p>
<p><img src="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E5%AD%98%E5%82%A8%E5%99%A8%E7%BB%93%E6%9E%84.jpg" alt="高速缓存"></p>
<h4 id="1-读取过程"><a href="#1-读取过程" class="headerlink" title="1. 读取过程"></a>1. 读取过程</h4><p>首先通过set index确定要从哪个set中寻找，确定后利用tag和同一个set中的每个cache line进行比对，找到tag相同的那个line，最后再根据block offset确定要从line的哪个位置读起。</p>
<p>当 E=1 时，也就是每个 set 只有 1 个 line 的时候，称之为<strong>直接映射缓存(Direct Mapped Cache)</strong>，如下图所示</p>
<p><img src="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E5%AD%98%E5%82%A8%E5%99%A8%E6%9F%A5%E6%89%BE%E8%BF%87%E7%A8%8B2.jpg" alt="高速缓存2"></p>
<h4 id="2-缓存一致性问题（拓展）"><a href="#2-缓存一致性问题（拓展）" class="headerlink" title="2. 缓存一致性问题（拓展）"></a>2. 缓存一致性问题（拓展）</h4><p>高速缓存实际上既可以保存数据，也可以保存指令，只保存指令的高速缓存称为i-cache，只保存程序数据的高速缓存称为d-cache，既保存指令又包括数据的高速缓存称为<strong>统一的高速缓存</strong>，现代处理器包括独立的i-cache和d-cache。下面展示一个Intel Core i7的高速缓存层次结构</p>
<p><img src="https://pjmike-1253796536.cos.ap-beijing.myqcloud.com/CSAPP/%E5%A4%9A%E6%A0%B8%E5%A4%84%E7%90%86%E5%99%A8%E7%9A%84%E7%BB%84%E7%BB%87%E7%BB%93%E6%9E%84.JPG" alt="多核处理器的组织结构"></p>
<p>高速缓存虽好，但是它却带来了一个问题就是：缓存一致性问题。在如上图所示的多处理器系统中，每个CPU都有自己的高速缓存，而它们又共享同一主存，当多个处理器都有自己的运算任务都涉及同一块主内存区域时，将可能导致各自的缓存数据不一致的问题。</p>
<p>为了解决缓存一致性问题，需要各个处理器访问缓存时遵循缓存一致性协议（最常见的MESI协议)，在读写时要根据协议来进行操作。</p>
<p>在MESI协议中，每个Cache line有4种状态，分别是：</p>
<ul>
<li>M（Modified) ：这行数据有效，但是被修改了，和内存中的数据不一致，数据只存在于本Cache中</li>
<li>E (Exclusive): 这行数据有效，和内存中的数据一致，数据只存在于本Cache中</li>
<li>S (Shared): 这行数据有效，和内存中的数据一致，数据分布在很多 Cache中</li>
<li>I （Invalid): 这行数据无效</li>
</ul>
<p>每个Core的Cache控制器不仅知道自己的读写操作，也监听其他Cache的读写操作，假如有4个Core:</p>
<ul>
<li>Core1从内存中加载了变量X，值为10，这时Core1中缓存变量X的cache line的状态是E；</li>
<li>Core2也从内存中加载了变量X，这时Core1和Core2缓存变量X的cache line状态转化成S；</li>
<li>Core3也从内存中加载了变量X，然后把X设置成了20，这时Core3中缓存变量X的cache line状态转化成M，其它Core对应的cache line变成I（无效）</li>
</ul>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li>《深入理解计算机系统》</li>
<li><a href="https://wdxtub.com/2016/04/16/thin-csapp-3/" target="_blank" rel="noopener">https://wdxtub.com/2016/04/16/thin-csapp-3/</a></li>
</ul>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://pjmike.github.io/2019/04/27/CSAPP笔记之存储器层次结构/" data-id="cjvgqqwli002txotd2r3h77bu" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://pjmike.github.io/2019/04/27/CSAPP笔记之存储器层次结构/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://pjmike.github.io/2019/04/27/CSAPP笔记之存储器层次结构/">Comments</a>
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2019/04/27/CSAPP笔记之异常控制流与进程/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Newer</strong>
            <div class="article-nav-title">
                
                    CSAPP笔记之异常控制流与进程
                
            </div>
        </a>
    
    
        <a href="/2019/04/25/基于Redis的分布式锁实现/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Older</strong>
            <div class="article-nav-title">基于Redis的分布式锁实现</div>
        </a>
    
</nav>


    
</article>


    
    
        <section id="comments">
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
</section>
    

</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">12</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Java/并发/">并发</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java，并发/">Java，并发</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MyBatis/">MyBatis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NIO/">NIO</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Netty/">Netty</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/RabbitMQ/">RabbitMQ</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/">Spring</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Security/">Spring Security</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring/">spring</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/springboot/">springboot</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/代理/">代理</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术杂谈/">技术杂谈</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据结构/">数据结构</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据结构与算法/">数据结构与算法</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/笔记/">笔记</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a><span class="category-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">22</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a><span class="archive-list-count">3</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/BeanUtils/">BeanUtils</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSAPP/">CSAPP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSAPP，笔记/">CSAPP，笔记</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DNS/">DNS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/">HTTP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/">JVM</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyBatis/">MyBatis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/">MySQL</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NIO/">NIO</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NIO-2/">NIO.2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Netty/">Netty</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/">Nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/">RabbitMQ</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Reactor/">Reactor</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/">Redis</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis，分布式/">Redis，分布式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Socket/">Socket</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/">Spring</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Security/">Spring Security</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP/">TCP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/leetcode/">leetcode</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mybatis/">mybatis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/">spring</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring-data-jpa/">spring data jpa</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springboot/">springboot</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/websocket/">websocket</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/二叉搜索树/">二叉搜索树</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/代理/">代理</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/平衡二叉树/">平衡二叉树</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/排序算法/">排序算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/笔记/">笔记</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/限流/">限流</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随笔/">随笔</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/BeanUtils/" style="font-size: 10px;">BeanUtils</a> <a href="/tags/CSAPP/" style="font-size: 11.67px;">CSAPP</a> <a href="/tags/CSAPP，笔记/" style="font-size: 10px;">CSAPP，笔记</a> <a href="/tags/DNS/" style="font-size: 10px;">DNS</a> <a href="/tags/HTTP/" style="font-size: 10px;">HTTP</a> <a href="/tags/JVM/" style="font-size: 13.33px;">JVM</a> <a href="/tags/Java/" style="font-size: 18.33px;">Java</a> <a href="/tags/MyBatis/" style="font-size: 10px;">MyBatis</a> <a href="/tags/MySQL/" style="font-size: 16.67px;">MySQL</a> <a href="/tags/NIO/" style="font-size: 11.67px;">NIO</a> <a href="/tags/NIO-2/" style="font-size: 10px;">NIO.2</a> <a href="/tags/Netty/" style="font-size: 15px;">Netty</a> <a href="/tags/Nginx/" style="font-size: 10px;">Nginx</a> <a href="/tags/RabbitMQ/" style="font-size: 11.67px;">RabbitMQ</a> <a href="/tags/Reactor/" style="font-size: 10px;">Reactor</a> <a href="/tags/Redis/" style="font-size: 11.67px;">Redis</a> <a href="/tags/Redis，分布式/" style="font-size: 10px;">Redis，分布式</a> <a href="/tags/Socket/" style="font-size: 10px;">Socket</a> <a href="/tags/Spring/" style="font-size: 10px;">Spring</a> <a href="/tags/Spring-Security/" style="font-size: 11.67px;">Spring Security</a> <a href="/tags/TCP/" style="font-size: 10px;">TCP</a> <a href="/tags/leetcode/" style="font-size: 11.67px;">leetcode</a> <a href="/tags/mybatis/" style="font-size: 10px;">mybatis</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/spring/" style="font-size: 10px;">spring</a> <a href="/tags/spring-data-jpa/" style="font-size: 10px;">spring data jpa</a> <a href="/tags/springboot/" style="font-size: 20px;">springboot</a> <a href="/tags/websocket/" style="font-size: 10px;">websocket</a> <a href="/tags/二叉搜索树/" style="font-size: 10px;">二叉搜索树</a> <a href="/tags/代理/" style="font-size: 10px;">代理</a> <a href="/tags/平衡二叉树/" style="font-size: 10px;">平衡二叉树</a> <a href="/tags/排序算法/" style="font-size: 10px;">排序算法</a> <a href="/tags/笔记/" style="font-size: 11.67px;">笔记</a> <a href="/tags/限流/" style="font-size: 10px;">限流</a> <a href="/tags/随笔/" style="font-size: 10px;">随笔</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fas fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2019 pjmike<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
    <div calss="count-span">
		<span id="busuanzi_container_site_pv">
    本站总访问量<span id="busuanzi_value_site_pv"></span>次
	</span>
		<span id="busuanzi_container_site_uv">
  本站访客数<span id="busuanzi_value_site_uv"></span>人次
</span>
	</div>	
</footer>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

        
    
    <script>
    var disqus_config = function () {
        
            this.page.url = 'https://pjmike.github.io/2019/04/27/CSAPP笔记之存储器层次结构/';
        
        this.page.identifier = 'CSAPP笔记之存储器层次结构';
    };
    (function() { 
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'pjmike' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>